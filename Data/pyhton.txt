import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
sns.set_style("darkgrid")


file_path = 'student-scores.csv'
df = pd.read_csv(file_path)

df['part_time_job'] = df['part_time_job'].astype(int)
df['extracurricular_activities'] = df['extracurricular_activities'].astype(int)
df['gender'] = df['gender'].replace({'male': 1, 'female': 0})
df['career_aspiration'] = df['career_aspiration'].astype('category')
df['average_score'] = round((df['math_score'] + df['history_score'] +
                       df['physics_score'] + df['chemistry_score'] +
                       df['biology_score'] + df['english_score'] +
                       df['geography_score'])/7,2)

file_path = 'student-scores-clean.csv'
df = df.drop(['id','career_aspiration','first_name','last_name','email','career_aspiration',
              'math_score','history_score','history_score','chemistry_score','biology_score',
              'english_score','geography_score'],axis = 1)
df.to_csv(file_path, index=False)

for column in df.columns:
  unique_vals = df[column].unique()
  num_bins = len(unique_vals) if len(unique_vals) < 20 else 20
  plt.figure(figsize=(8, 6))
  plt.hist(df[column], bins=num_bins, edgecolor='black')
  plt.title(f'Histogram of {column}')
  plt.xlabel(column)
  plt.ylabel('Frequency')
  plt.savefig(f'img/{column}_historgram.png')